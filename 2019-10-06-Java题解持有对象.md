---
title: Java题解持有对象
date: 2019-10-06 10:00:00
tags: 题解
 
---

## 第十一章持有对象

class Gerbil {

​       private int gerbilNumber;

​       public Gerbil(int i) {

​              gerbilNumber = i;

​       }

​       public void hop() {

​              System.out.println("Gerbil " + gerbilNumber + " hops");

​       }

}

 

public class Ex1 {

​       public static void main(String[] args) {

​              ArrayList<Gerbil> gerbils = new ArrayList<Gerbil>();

​              for(int i = 0; i < 10; i++)

​                     gerbils.add(new Gerbil(i));

​              for(int i = 0; i < 10; i++) 

​                     gerbils.get(i).hop();

​                           for(Gerbil g : gerbils)

​                     g.hop();

​       }

}

 

public class Ex2 {

​       public static void main(String[] args) {

​              Set<Integer> c = new HashSet<Integer>();

​              for(int i = 0; i < 10; i++)

​                     c.add(i);               for(Integer i : c)

​                     System.out.print(i + ", ");

​       }      

}

 

interface Selector {

​       boolean end();

​       Object current();

​       void next();

}

 

public class Sequence3 {

​       private ArrayList<Object> items = new ArrayList<Object>();

​       public void add(Object x) {

​              items.add(x);

​       }

​       private class Sequence3Selector implements Selector {

​              private int i = 0;

​              public boolean end() {

​                     return i == items.size();               

​              }

​              public Object current() {

​                     return items.get(i);

​              }

​              public void next() {

​                     i++;

​              }      

​       }

​       public Selector selector() {

​              return new Sequence3Selector();

​       }

​       public static void main(String[] args) {

​              Sequence3 s3 = new Sequence3();

​              for(int i = 0; i < 10; i++)

​                     s3.add(i);

​              Selector selector = s3.selector();

​              while(!selector.end()) {

​                     System.out.print(selector.current() + " ");

​                     selector.next();

​              }

​              s3.add(10);

​              s3.add(11);

​              s3.add(12);

​              s3.add(13);

​              s3.add(13);

​              s3.add("good bye");

​              while(!selector.end()) {

​                     System.out.print(selector.current() + " ");

​                     selector.next();

​              }

​       }

}

 

class Generator {

​       int key = 0;

​       public String next() {

​              switch(key) {

​                     default:

​                     case 0 : key++; return "Snow White";

​                     case 1 : key++; return "Bashful";

​                     case 2 : key++; return "Doc";

​                     case 3 : key++; return "Dopey";

​                     case 4 : key++; return "Grumpy";

​                     case 5 : key++; return "Happy";

​                     case 6 : key++; return "Sleepy";

​                     case 7 : key = 0; return "Sneezy";              

​              }

​       } 

​       public void fillA(String[] a) {

​              for(int i = 0; i < a.length; i++)

​                     a[i] = next();

​       }

​       public Collection fill(Collection<String> c, int n) {

​              for(int i = 0; i < n; i++) c.add(next());

​              return c;

​       }

}

 

public class Ex4 {

​       public static void main(String[] args) {

​              Generator gen = new Generator();            

​              String[] a = new String[10];

​              gen.fillA(a);

​              for(String s : a) System.out.print(s + ", ");

​              System.out.println();     

​              System.out.println(gen.fill(new ArrayList<String>(), 10));

​              System.out.println(gen.fill(new LinkedList<String>(), 10));

​              System.out.println(gen.fill(new HashSet<String>(), 10));

​              System.out.println(gen.fill(new LinkedHashSet<String>(), 10));

​              System.out.println(gen.fill(new TreeSet<String>(), 10));                        

​       }

}

 

public class Ex5 {

​             public static List<Integer> listOfRandInteger(int length, int n) {

​              Random rand = new Random();

​              List<Integer> li = new ArrayList<Integer>(); 

​              for(int i = 0; i < length; i++)

​                     li.add(rand.nextInt(n));         

​              return li;  

​       }

​       public static void main(String[] args) {

​              Random rand = new Random();

​              List<Integer> li = listOfRandInteger(7, 10);

​              print("1: " + li);

​              Integer h = new Integer(rand.nextInt(10));

​              li.add(h);

​              print("2: " + li);

​              print("3: " + li.contains(h));

​                           li.remove(h);

​              print("3.5: " + li);

​              Integer p = li.get(2);

​              print("4: " + p + " " +  li.indexOf(p));

​              Integer cy = new Integer(rand.nextInt(10));

​              print("5: " + cy +" " + li.indexOf(cy));

​              print("6: " + li.remove(cy));

​              print("7: " + li.remove(p));

​              print("8: " + li);

​              li.add(3, new Integer(rand.nextInt(10)));

​              print("9: " + li);

​              List<Integer> sub = li.subList(1, 4);

​              print("sublist: " + sub);

​              print("10: " + li.containsAll(sub));

​                           Collections.sort(sub);

​              print("sorted sublist: " + sub);

​              print("11: " + li.containsAll(sub));

​              print("11.25: " + li);

​                           Collections.shuffle(sub, rand);

​              print("11.5: " + li);

​              print("shuffled sublist: " + sub);

​              print("12: " + li.containsAll(sub));

​              List<Integer> copy = new ArrayList<Integer>(li);

​              print("12.5: " + li);

​              sub = Arrays.asList(li.get(1), li.get(4));

​              print("sub: " + sub);      

​              copy.retainAll(sub);

​              print("13: " + copy);

​              copy = new ArrayList<Integer>(li);

​              copy.remove(2);

​              print("14: " + copy);

​              copy.removeAll(sub); 

​              print("15: " + copy);

​              if(copy.size() > 1)                      copy.set(1, 8);             print("16: " + copy);

​              if(copy.size() > 2)

​                     copy.addAll(2, sub);

​              print("17: " + copy);

​              print("18: " + li.isEmpty());

​              li.clear();

​              print("19: " + li);

​              print("20: " + li.isEmpty());

​              li.addAll(listOfRandInteger(4, 10));

​              print("21: " + li);

​              Object[] o = li.toArray();

​              print("22: " + o[3]);

​              Integer[] ia = li.toArray(new Integer[0]);

​              print("23: " + ia[3]);

​       }

}

 

public class Ex6 {

​       public static void main(String[] args) {

​              Random rand = new Random();

​              List<String> ls = new ArrayList<String>();

​              print("0: " + ls);

​              Collections.addAll(ls, "oh", "what", "a", "beautiful", "Manila", "Monday", "morning");

​              print("1: " + ls);

​              String h = new String("hi");

​              ls.add(h);

​              print("2: " + ls);

​              print("3: " + ls.contains(h));

​                           ls.remove(h);

​              print("3.5: " + ls);

​              String p = ls.size() > 2 ? ls.get(2) : null;

​              print("4: " + p + " " +  ls.indexOf(p));

​              String cy = new String("cy");

​              print("5: " + cy +" " + ls.indexOf(cy));

​              print("6: " + ls.remove(cy));

​              print("7: " + ls.remove(p));

​              print("8: " + ls);

​              if(ls.size() > 3)

​                     ls.add(3, "wonderful");

​              print("9: " + ls);

​              if(ls.size() < 4) {

​                     List<String> s = 

​                        Arrays.asList("let's", "jump", "in", "here");

​                     ls.addAll(0, s);

​              }

​              List<String> sub = ls.subList(1, 4);

​              print("sublist: " + sub);

​              print("10: " + ls.containsAll(sub));

​                           Collections.sort(sub);

​              print("sorted sublist: " + sub);

​              print("11: " + ls.containsAll(sub));

​              print("11.25: " + ls);

​                           Collections.shuffle(sub, rand);

​              print("11.5: " + ls);

​              print("shuffled sublist: " + sub);

​              print("12: " + ls.containsAll(sub));

​              List<String> copy = new ArrayList<String>(ls);

​              print("12.5: " + ls);

​              if(ls.size() < 5) {

​                     ls.add("two");

​                     ls.add("more");

​              }

​              sub = Arrays.asList(ls.get(1), ls.get(4));

​              print("sub: " + sub);      

​              copy.retainAll(sub);

​              print("13: " + copy);

​              copy = new ArrayList<String>(ls);

​              copy.remove(2);

​              print("14: " + copy);

​              copy.removeAll(sub); 

​              print("15: " + copy);

​              if(copy.size() > 1)                      copy.set(1, "excellent"); 

​              print("16: " + copy);

​              if(copy.size() > 2)

​                     copy.addAll(2, sub);

​              print("17: " + copy);

​              print("18: " + ls.isEmpty());

​              ls.clear();

​              print("19: " + ls);

​              print("20: " + ls.isEmpty());

​              ls.addAll(0, sub);

​              ls.addAll(2, sub);

​              print("21: " + ls);

​              Object[] o = ls.toArray();

​              print("22: " + o[3]);

​              String[] sa = ls.toArray(new String[0]);

​              print("23: " + sa[3]);

​       }

}

 

class Tester {

​       public static int counter = 0;

​       private int id = counter++;

​       public String toString() { return String.valueOf(id); } 

}

 

public class Ex7 {

​       public static void main(String[] args) {       

​              Tester[] t = new Tester[10];

​              for(int i = 0; i < t.length; i++)

​                     t[i] = new Tester();

​              List<Tester> lt = new ArrayList<Tester>();

​              for(Tester x : t) lt.add(x);

​              print("list of Tester: " + lt);

​              List<Tester> sub = lt.subList(2, 6);

​              print("subList: " + sub);

​                                                     List<Tester> copy = new ArrayList<Tester>(lt);

​              copy.removeAll(sub);

​              print("copy: " + copy);

​              lt = copy;

​              print("list of Tester: " + lt);

​       }

}

 

 

 

​    import java.util.*;

 

class Gerbil {

​       private int gerbilNumber;

​       public Gerbil(int i) {

​              gerbilNumber = i;

​       }

​       public void hop() {

​              System.out.println("Gerbil " + gerbilNumber + " hops");

​       }

}

 

public class Ex8 {

​       public static void main(String[] args) {

​              ArrayList<Gerbil> gerbils = new ArrayList<Gerbil>();

​              for(int i = 0; i < 10; i++)

​                     gerbils.add(new Gerbil(i));

​              Iterator<Gerbil> it = gerbils.iterator();

​              while(it.hasNext()) 

​                     it.next().hop();

​       }

}

 

public class Sequence9 {

​       private ArrayList<Object> items = new ArrayList<Object>();

​       public void add(Object x) {

​              items.add(x);

​       }

​       public Iterator iterator() {

​              return items.iterator();

​       }

​       public static void main(String[] args) {

​              Sequence9 sequence = new Sequence9();

​              for(int i = 0; i < 10; i++)

​                     sequence.add(Integer.toString(i));

​              Iterator it = sequence.iterator();

​              while(it.hasNext()) {                                                               System.out.print(it.next() + " ");

​              }

​       }

}

 

class RandomRodentGenerator {

​       private Random rand = new Random();

​       public Rodent next() {

​              switch(rand.nextInt(3)) {

​                     default:

​                     case 0: return new Mouse();

​                     case 1: return new Rat();

​                     case 2: return new Squirrel();                     

​              }

​       }

}

 

class Rodent {

​       private String name = "Rodent";

​       protected void eat() { println("Rodent.eat()"); }

​       protected void run() { println("Rodent.run()"); }

​       protected void sleep() { println("Rodent.sleep()"); }

​       public String toString() { return name; }

}

 

class Mouse extends Rodent {

​       private String name = "Mouse";

​       protected void eat() { println("Mouse.eat()"); }

​       protected void run() { println("Mouse.run()"); }

​       protected void sleep() { println("Mouse.sleep()"); }

​       public String toString() { return name; }

}

 

class Rat extends Rodent {

​       private String name = "Rat";

​       protected void eat() { println("Rat.eat()"); }

​       protected void run() { println("Rat.run()"); }

​       protected void sleep() { println("Rat.sleep()"); }

​       public String toString() { return name; }

}

 

class Squirrel extends Rodent {

​       private String name = "Squirrel";

​       protected void eat() { println("Squirrel.eat()"); }

​       protected void run() { println("Squirrel.run()"); }

​       protected void sleep() { println("Squirrel.sleep()"); }

​       public String toString() { return name; }

}

 

public class Rodent10 {

​       private static RandomRodentGenerator gen = 

​              new RandomRodentGenerator();

​       public static void main(String[] args) {

​              List<Rodent> rodentList = new ArrayList<Rodent>();

​              for(int i = 0; i < 10; i++)

​                     rodentList.add(gen.next());

​              Iterator<Rodent> it = rodentList.iterator();

​              while(it.hasNext()) {

​                     Rodent r = it.next();

​                     print(r + ": ");

​                     r.eat();

​                     r.run();

​                     r.sleep();

​              }

​       }

}

 

public class Ex11 {

​       public static void printAny(Collection c) {

​              Iterator it = c.iterator();

​              while(it.hasNext())

​                     print(it.next() + " ");

​              println();

​       }

​       public static void main(String[] args) {

​              ArrayList<Integer> al = 

​                     new ArrayList<Integer>(Arrays.asList(1, 2, 3));

​              LinkedList<Character> ll =

​                     new LinkedList<Character>(Arrays.asList('a', 'b', 'c'));       

​              HashSet<Float> hs = 

​                     new HashSet<Float>(Arrays.asList(1.1f, 2.2f, 3.3f));

​              TreeSet<Double> ts =

​                     new TreeSet<Double>(Arrays.asList(1.11, 2.22, 3.33));

​              LinkedHashSet<Integer> lhs =

​                     new LinkedHashSet<Integer>(Arrays.asList(11, 22, 33));

​              printAny(al);

​              printAny(ll);

​              printAny(hs);

​              printAny(ts);

​              printAny(lhs);

​       }

}

public class Ex12 {

​       public static void main(String[] args) {

​              List<Integer> li1 = 

​                     new ArrayList<Integer>(Arrays.asList(0, 1, 2, 3, 4));

​              List<Integer> li2 = 

​                     new ArrayList<Integer>(Arrays.asList(5, 6, 7, 8, 9));

​              ListIterator<Integer> it1 = li1.listIterator();

​              ListIterator<Integer> it2 = li2.listIterator();

​              println("li1: " + li1);

​              println("li2: " + li2);

​                           while(it1.hasNext())

​                     it1.next();

​                           while(it2.hasNext()) {     

​                     it2.next();        

​                     it2.set(it1.previous());

​              }

​              println("li1: " + li1);

​              println("li2: " + li2);

​              

​       }

}

 

public class Ex12a {

​       public static void main(String[] args) {

​              List<Integer> li1 = 

​                     new ArrayList<Integer>(Arrays.asList(0, 1, 2, 3, 4));

​              List<Integer> li2 = 

​                     new ArrayList<Integer>(Arrays.asList(5, 6, 7, 8, 9));

​                           ListIterator<Integer> it1 = li1.listIterator(5);

​              ListIterator<Integer> it2 = li2.listIterator();

​              println("li1: " + li1);

​              println("li2: " + li2);

​                           while(it2.hasNext()) {     

​                     it2.next();        

​                     it2.set(it1.previous());

​              }

​              println("li1: " + li1);

​              println("li2: " + li2);

​              

​       }

}

public class Controller13 {

​             private LinkedList<Event> eventList = new LinkedList<Event>();

​       public void addEvent(Event c) { eventList.add(c); }           

​       public void run() {         

​              LinkedList<Event> eventListCopy = 

​                     new LinkedList<Event>(eventList);

​              ListIterator<Event> it 

​                     = eventListCopy.listIterator();

​              while(it.hasNext()) {       

​                     it.next().action();

​                     it.previous();          

​                     System.out.println(it.next());         

​              }

​       }      

}

public class Ex14 {

​       static void addMiddle(LinkedList<Integer> l, Integer[] ia) {

​              

​              for(Integer i : ia) {

​                     ListIterator<Integer> it = 

​                            l.listIterator((l.size())                   it.add(i);

​                     System.out.println(l);

​              }

​       }

​       public static void main(String[] args) {

​              LinkedList<Integer> li = new LinkedList<Integer>();

​              Integer[] x = {0, 1, 2, 3, 4, 5, 6, 7};

​              Ex14.addMiddle(li, x);

​       }      

}

 

public class Ex15 {

​       public static void main(String[] args) {

​              Stack<Character> sc = new Stack<Character>();

​              sc.push('U');

​              sc.push('n');

​              sc.push('c');

​              System.out.print(sc.pop());

​              System.out.print(sc.pop());

​              System.out.print(sc.pop());

​              sc.push('e');

​              sc.push('r');

​              sc.push('t');

​              System.out.print(sc.pop());

​              System.out.print(sc.pop());

​              System.out.print(sc.pop());

​              sc.push('a');

​              sc.push('i');

​              sc.push('n');

​              sc.push('t');

​              System.out.print(sc.pop());

​              System.out.print(sc.pop());

​              System.out.print(sc.pop());

​              sc.push(' ');

​              System.out.print(sc.pop());

​              sc.push('r');

​              sc.push('u');

​              System.out.print(sc.pop());

​              System.out.print(sc.pop());

​              sc.push('l');

​              sc.push('e');

​              sc.push('s');

​              System.out.print(sc.pop());

​              System.out.print(sc.pop());

​              System.out.print(sc.pop());          

​       }             

}

 

public class Vowels16 {

​       static void vowelCounter(Set<String> st) {

​              Set<Character> vowels = new TreeSet<Character>();

​              Collections.addAll(vowels, 

​                     'A', 'E', 'I', 'O', 'U', 'a', 'e', 'i', 'o', 'u');

​              int allVowels = 0;

​              for(String s : st) {

​                     int count = 0;

​                     for(Character v : s.toCharArray()) {             

​                            if(vowels.contains(v)) {

​                                   count++;

​                                   allVowels++; 

​                            }

​                     }

​                     System.out.print(s + ": " + count + ", ");            

​              }

​              System.out.println();     

​              System.out.print("Total vowels: " + allVowels);

​       }

​       public static void main(String[] args) {

​              Set<String> words = new TreeSet<String>(

​                     new TextFile("SetOperations.java", "\\W+"));

​              System.out.println(words);

​              System.out.println();

​              vowelCounter(words);         

​       }             

}

 

class Gerbil {

​       private int gerbilNumber;

​       public Gerbil(int i) {

​              gerbilNumber = i;

​       }

​       public void hop() {

​              System.out.println("gerbil " + gerbilNumber + " hops");

​       }

}

 

public class Gerbils17 {

​       public static void main(String[] args) {

​              Map<String, Gerbil> gerbils = new HashMap<String, Gerbil>();

​              gerbils.put("Fuzzy", new Gerbil(0));

​              gerbils.put("Spot", new Gerbil(1));

​              gerbils.put("Speedy", new Gerbil(2));

​              gerbils.put("Dopey", new Gerbil(3));

​              gerbils.put("Sleepy", new Gerbil(4));

​              gerbils.put("Happy", new Gerbil(5));

​              Iterator<String> it = gerbils.keySet().iterator();

​              while(it.hasNext()) {

​                     String s = it.next();

​                     System.out.print(s + ": ");

​                     gerbils.get(s).hop();

​              }      

​       }

class Gerbil {

​       private int gerbilNumber;

​       public Gerbil(int i) {

​              gerbilNumber = i;

​       }

​       public void hop() {

​              System.out.println("gerbil " + gerbilNumber + " hops");

​       }

}

 

public class Ex18 {

​       public static void main(String[] args) {

​              Map<String, Gerbil> gerbils = new HashMap<String, Gerbil>();

​              gerbils.put("Fuzzy", new Gerbil(0));

​              gerbils.put("Spot", new Gerbil(1));

​              gerbils.put("Speedy", new Gerbil(2));

​              gerbils.put("Dopey", new Gerbil(3));

​              gerbils.put("Sleepy", new Gerbil(4));

​              gerbils.put("Happy", new Gerbil(5));

​              gerbils.put("Funny", new Gerbil(6));

​              gerbils.put("Silly", new Gerbil(7));

​              gerbils.put("Goofy", new Gerbil(8));

​              gerbils.put("Wowee", new Gerbil(9));

​              System.out.println(gerbils);

​              System.out.println();

​              Set<String> sortedKeys = 

​                     new TreeSet<String>(gerbils.keySet());

​              System.out.println(sortedKeys);

​              System.out.println();

​              Map<String, Gerbil> sortedGerbils = 

​                     new LinkedHashMap<String, Gerbil>();

​              for(String s : sortedKeys) {

​                     System.out.print("Adding " + s + ", ");

​                     sortedGerbils.put(s, gerbils.get(s));                   

​              }

​              System.out.println();

​              System.out.println();

​              System.out.println(sortedGerbils);

​              System.out.println();

​                           Map<String, Gerbil> sortedGerbils2 =

​                     new TreeMap<String, Gerbil>(gerbils);

​              System.out.println(sortedGerbils2);            

​       }

}

class Gerbil {

​       private int gerbilNumber;

​       public Gerbil(int i) {

​              gerbilNumber = i;

​       }

​       public void hop() {

​              System.out.println("gerbil " + gerbilNumber + " hops");

​       }

}

 

public class Ex19 {

​       public static void main(String[] args) {

​              Map<String, Gerbil> gerbils = new HashMap<String, Gerbil>();

​              gerbils.put("Fuzzy", new Gerbil(0));

​              gerbils.put("Spot", new Gerbil(1));

​              gerbils.put("Speedy", new Gerbil(2));

​              gerbils.put("Dopey", new Gerbil(3));

​              gerbils.put("Sleepy", new Gerbil(4));

​              gerbils.put("Happy", new Gerbil(5));

​              gerbils.put("Funny", new Gerbil(6));

​              gerbils.put("Silly", new Gerbil(7));

​              gerbils.put("Goofy", new Gerbil(8));

​              gerbils.put("Wowee", new Gerbil(9));

​              System.out.println(gerbils);

​              System.out.println();

​              Set<String> hashedKeys = 

​                     new HashSet<String>(gerbils.keySet());

​              System.out.println("HashSet: " + hashedKeys);

​              System.out.println();

​              Map<String, Gerbil> hashedGerbils = 

​                     new LinkedHashMap<String, Gerbil>();

​              for(String s : hashedKeys) {

​                     System.out.print("Adding " + s + ", ");              

​                     hashedGerbils.put(s, gerbils.get(s));

​              }

​              System.out.println();

​              System.out.println();

​              System.out.println("From HashSet: " + hashedGerbils);

​              

​              System.out.println();

​              Set<String> linkedHashedKeys = 

​                     new LinkedHashSet<String>(gerbils.keySet());

​              System.out.println("LinkedHashSet: " + linkedHashedKeys);

​              System.out.println();

​              Map<String, Gerbil> linkedHashedGerbils = 

​                     new LinkedHashMap<String, Gerbil>();

​              for(String s : linkedHashedKeys) {

​                     System.out.print("Adding " + s + ", ");              

​                     linkedHashedGerbils.put(s, gerbils.get(s));

​              }

​              System.out.println();

​              System.out.println();

​              System.out.println("From LinkedHashSet: " 

​                     + linkedHashedGerbils);

​              }

}

 

public class Vowels20 {

​       static void vowelCounter20(Set<String> st) {           

​              Set<Character> vowels = new TreeSet<Character>();

​              Collections.addAll(vowels, 

​                     'A', 'E', 'I', 'O', 'U', 'a', 'e', 'i', 'o', 'u');

​              int allVowels = 0;

​              Map<Character,Integer> vowelMap =

​                     new TreeMap<Character,Integer>();

​              for(String s : st) {

​                     for(Character v : s.toCharArray()) {             

​                            if(vowels.contains(v)) {

​                                   Integer count = vowelMap.get(v);

​                                   vowelMap.put(v, 

​                                          count == null ? 1 : count + 1);

​                                   allVowels++; 

​                            }

​                     }

​              }

​              System.out.println("Vowels: " + vowelMap);      

​              System.out.println("Total vowels: " + allVowels);

​       }

​       public static void main(String[] args) {

​              Set<String> words = new TreeSet<String>(

​                     new TextFile("SetOperations.java", "\\W+"));

​              System.out.println(words);

​              System.out.println();

​              vowelCounter20(words);             

​       }             

}

 

public class UniqueWords21 {

​       public static void main(String[] args) {

​              List<String> words = new ArrayList<String>(

​                     new TextFile("SetOperations.java", "\\W+"));

​              System.out.println("Words to count: " + words);

​              Collections.sort(words, String.CASE_INSENSITIVE_ORDER);

​              Map<String,Integer> wordCount =

​                     new LinkedHashMap<String,Integer>();

​              Iterator it = words.iterator();

​              int totalWords = 0;

​              while(it.hasNext()) {

​                     String s = (String)it.next();

​                     if(words.contains(s)) {

​                            Integer count = wordCount.get(s);

​                            wordCount.put(s,

​                                   count == null ? 1 : count + 1);

​                            totalWords++;

​                     }

​              }

​              System.out.println();

​              System.out.println("Word count: " + wordCount);

​              System.out.println();

​              System.out.println("Total words: " + totalWords);            

​       }             

}

 

class Word {

​       static int totalWords = 0;     

​       String s;  

​       int count;

​       Word(String s, int count) { 

​              this.s = s; 

​              this.count = count;

​              totalWords++;

​       }

​       public String toString() { return s + ": " + count; }

}

 

public class UniqueWords22 {

​       public static void main(String[] args) {

​              List<String> words = new ArrayList<String>(

​                     new TextFile("SetOperations.java", "\\W+"));            

​              Collections.sort(words, String.CASE_INSENSITIVE_ORDER);

​              System.out.println("Words to count, sorted: " + words);

​              Set<Word> wordObjects = new HashSet<Word>();

​              Iterator it = words.iterator(); 

​              while(it.hasNext()) {

​                     String s = (String)it.next();

​                     int count = 0;               

​                     for(int i = 0; i < words.size(); i++) {

​                            if(s.equals(words.get(i))) count++;

​                     }

​                     Word w = new Word(s, count);

​                     wordObjects.add(w);

​              }             

​              System.out.println("Word count: " + wordObjects);

​              System.out.println("Total words: " + Word.totalWords);          

​       }             

}

public class Statistics23 {

​       private static int getBestInt20(int n) {

​              Random rand = new Random();

​              Map<Integer, Integer> m =

​                     new TreeMap<Integer, Integer>();

​              for(int i = 0; i < 10000; i++) {

​                                         int r = rand.nextInt(20);

​                     Integer freq = m.get(r);

​                     m.put(r, freq == null ? 1 : freq + 1);

​              }

​              int max = 0;

​              for(int i = 0; i < m.keySet().size(); i++) {

​                     max = max < m.get(i) ? m.get(i) : max;

​              }

​              Set<Map.Entry<Integer,Integer>> me = new 

​                     LinkedHashSet<Map.Entry<Integer,Integer>>(m.entrySet());

​              int maxKey = 0;

​              Iterator<Map.Entry<Integer,Integer>> it = me.iterator();

​              while(it.hasNext()) {

​                     Map.Entry<Integer,Integer> findMax = it.next();

​                     if(findMax.getValue() == max)

​                     maxKey = findMax.getKey();

​              }

​              return maxKey;                    

​       }

​       public static void main(String[] args) {

​              Map<Integer,Integer> m20 =            

​                     new TreeMap<Integer,Integer>();

​              for(int i = 0; i < 2000; i++) {

​                     int x = getBestInt20(10000);

​                     Integer freq = m20.get(x);

​                     m20.put(x, freq == null ? 1 : freq + 1);

​              }

​              System.out.println("Most often picked ints, 0 - 19, in 2000 tests of 10,000 random picks: " + m20);

​       }

}      

 

public class Ex24{  

​       public static void main(String[] args) {

​              Map<String,Integer> m = 

​                     new LinkedHashMap<String,Integer>();

​              m.put("ten", 10);

​              m.put("nine", 9);

​              m.put("eight", 8);

​              m.put("seven", 7);

​              m.put("six", 6);

​              m.put("five", 5);

​              m.put("four", 4);

​              m.put("three", 3);

​              m.put("two", 2);

​              m.put("one", 1);

​              m.put("zero", 0);

​              println("Map to sort: " + m);

​                           Map<String,Integer> mTemp = 

​                     new LinkedHashMap<String,Integer>();

​                           Set<String> ss = new TreeSet<String>(m.keySet());

​                           Iterator<String> itss = ss.iterator();

​              while(itss.hasNext()) {

​                     String s = (String)itss.next();

​                     Integer i = m.get(s);

​                     m.remove(s);

​                     mTemp.put(s, i);

​              }

​                           Set<String> ssTemp = 

​                     new TreeSet<String>(mTemp.keySet());

​                           Iterator<String> itssTemp = ssTemp.iterator();

​              while(itssTemp.hasNext()) {

​                     String s = (String)itssTemp.next();

​                     Integer i = mTemp.get(s);

​                     mTemp.remove(s);

​                     m.put(s, i);

​              }

​                           mTemp.clear();

​              println("Sorted map: " + m);

​       }

}      

 

public class Ex24b{       

​       public static void main(String[] args) {

​              Map<String,Integer> m = 

​                     new LinkedHashMap<String,Integer>();

​              m.put("ten", 10);

​              m.put("nine", 9);

​              m.put("eight", 8);

​              m.put("seven", 7);

​              m.put("six", 6);

​              m.put("five", 5);

​              m.put("four", 4);

​              m.put("three", 3);

​              m.put("two", 2);

​              m.put("one", 1);

​              m.put("zero", 0);

​              println("Map to sort: " + m);

​                           Map<String,Integer> mTemp = 

​                     new LinkedHashMap<String,Integer>();

​                                        List<String> ss2List = 

​                     new LinkedList<String>(m.keySet());

​                           Collections.sort(ss2List);

​                           Iterator<String> itss2List = ss2List.iterator();

​              while(itss2List.hasNext()) {

​                     String s = (String)itss2List.next();

​                     Integer i = m.get(s);

​                     m.remove(s);

​                     mTemp.put(s, i);

​              }

​                           List<String> ssTemp = 

​                     new LinkedList<String>(mTemp.keySet());

​                           Iterator<String> itssTemp = ssTemp.iterator();

​              while(itssTemp.hasNext()) {

​                     String s = (String)itssTemp.next();

​                     Integer i = mTemp.get(s);

​                     mTemp.remove(s);

​                     m.put(s, i);

​              }

​                           mTemp.clear();

​              println("Sorted map: " + m);       

​       }

}      

 

public class Ex25 {

​       public static void main(String[] args) {

​              Map<String,ArrayList<Integer>> m = 

​                     new LinkedHashMap<String,ArrayList<Integer>>();

​              List<String> words = new LinkedList<String>();

​              words.addAll(new TextFile("SetOperations.java", "\\W+"));

​              System.out.println("Words in file: " + words);

​              Iterator itWords = words.iterator();

​              int count = 0;

​              while(itWords.hasNext()) {

​                     String s = (String)itWords.next();

​                     count++;                     

​                     if(!m.keySet().contains(s)) {   

​                            ArrayList<Integer> ai = 

​                                   new ArrayList<Integer>();           

​                            ai.add(0, count);

​                            m.put(s, ai);

​                     }

​                     else {

​                            m.get(s).add(count);

​                            m.put(s, m.get(s));       

​                     }

​              }

​              System.out.println("Map of word locations: " + m);                

​       }      

}

 

public class Ex26 {

​       public static void main(String[] args) {

​              Map<String,ArrayList<Integer>> m = 

​                     new LinkedHashMap<String,ArrayList<Integer>>();

​              List<String> words = new LinkedList<String>();

​              words.addAll(new TextFile("SetOperations.java", "\\W+"));

​              System.out.println("Words in file: " + words);

​              Iterator itWords = words.iterator();

​              int count = 0;

​              while(itWords.hasNext()) {

​                     String s = (String)itWords.next();

​                     count++;                     

​                     if(!m.keySet().contains(s)) {   

​                            ArrayList<Integer> ai = 

​                                   new ArrayList<Integer>();           

​                            ai.add(0, count);

​                            m.put(s, ai);

​                     }

​                     else {

​                            m.get(s).add(count);

​                            m.put(s, m.get(s));       

​                     }

​              }

​              System.out.println();

​              System.out.println("Map of word locations: " + m);

​                           Map<Integer,String> replay = new TreeMap<Integer,String>();

​              Iterator<Map.Entry<String,ArrayList<Integer>>> it = 

​                     m.entrySet().iterator();

​              while(it.hasNext()) {

​                     Map.Entry<String,ArrayList<Integer>> me = it.next();

​                     for(int i = 0; i < me.getValue().size(); i++)

​                            replay.put(me.getValue().get(i),

​                                   me.getKey());

​              }

​              System.out.println();

​              System.out.println("TreeMap of ordered locations, words: " + replay);

​              System.out.println();

​                           System.out.println("Words in original order: " +

​                     replay.values());

​       }      

}

 

class Command {

​       String s;

​       Command(String s) { this.s = s; }

​       void operation() { System.out.print(s); }

}

 

class Build {    

​       Queue<Command> makeQ() {

​              Queue<Command> q = new LinkedList<Command>();

​              for(int i = 0; i < 10; i++)

​                     q.offer(new Command(i + " "));

​              return q;

​       }

}

 

public class Queue27 {

​       public static void commandEater(Queue<Command> qc) {

​              while(qc.peek() != null)

​                     qc.poll().operation();

​       }

​       public static void main(String[] args) {

​              Build b = new Build();

​              commandEater(b.makeQ()); 

​       }

}

 

public class Ex28 {

​       public static void main(String[] args) {

​              Random rand = new Random();

​              PriorityQueue<Double> d = new PriorityQueue<Double>();

​              for(int i = 0; i < 10; i++)

​                     d.offer(rand.nextDouble() * i);

​              while(d.peek() != null)

​                     System.out.print(d.poll() + " ");

​       }

}

 

class Simple extends Object {}

 

public class Ex29 {

​       public static void main(String[] args) {       

​              PriorityQueue<Simple> s = new PriorityQueue<Simple>();

​                           s.offer(new Simple());

​                                        s.offer(new Simple());

​       }

}

 

 

 

 

 

 import typeinfo.pets.*;

import java.util.*;

 

public class CollectionSequence30 implements Collection<Pet> {

​       private Pet[] pets = Pets.createArray(8);

​       public int size() { return pets.length; }

​       public Iterator<Pet> iterator() {

​              return new Iterator<Pet>() {

​                     private int index = 0;

​                     public boolean hasNext() {

​                            return index < pets.length; 

​                     }

​                     public Pet next() { return pets[index++]; }

​                     public void remove() {                             throw new UnsupportedOperationException();

​                     }

​              };

​       }

​       public void clear() { 

​              if(this.size() != 0)

​              for(Pet p : pets)

​                     p = null;

​       }

​       public boolean retainAll(Collection<?> c) { 

​              throw new UnsupportedOperationException();

​       }

​       public boolean removeAll(Collection<?> c) { 

​              throw new UnsupportedOperationException();

​       }

​       public boolean addAll(Collection<? extends Pet> c) { 

​              throw new UnsupportedOperationException();

​       }

​       public boolean contains(Object o) {   

​              throw new UnsupportedOperationException();

​       }

​       public boolean isEmpty() {   

​              return (this.size() == 0) ? true : false;

​       }

​       public boolean containsAll(Collection<?> c) { 

​              throw new UnsupportedOperationException();

​       }

​       public boolean remove(Object o) { 

​              throw new UnsupportedOperationException();

​       }

​       public boolean add(Pet p) { 

​              throw new UnsupportedOperationException();

​       }

​       public Object[] toArray() {

​              return pets;

​       }

​       public <T> T[] toArray(T[] a) {

​            throw new UnsupportedOperationException();

​       }

​       public static void main(String[] args) {

​              CollectionSequence30 c = new CollectionSequence30();

​              InterfaceVsIterator.display(c);

​              InterfaceVsIterator.display(c.iterator());

​       }

}

 

public class RandomShapeGenerator31 implements Iterable<Shape> {

​       private Random rand = new Random();

​       public Shape make() {          

​              switch(rand.nextInt(3)) {

​                     default:

​                     case 0: return new Circle();

​                     case 1: return new Square();

​                     case 2: return new Triangle();

​              }

​       }

​       private Shape[] shapes;

​       RandomShapeGenerator31(int n) {

​              shapes = new Shape[n];

​              for(int i = 0; i < n; i++)

​                     shapes[i] = make();

​                             

​       }

​       public Iterator<Shape> iterator() {

​              return new Iterator<Shape>() {

​                     private int index = 0;

​                     public boolean hasNext() {

​                            return index < shapes.length;

​                     }

​                     public Shape next() {

​                            return shapes[index++];

​                     }

​                     public void remove() {

​                            throw new UnsupportedOperationException();

​                     }                    

​              };

​       }

​       public static void main(String[] args) {

​              RandomShapeGenerator31 rsg = new RandomShapeGenerator31(20);

​              for(Shape s : rsg)

​                     System.out.println(s);

​       }

}

class PetSequence {

​       protected Pet[] pets = Pets.createArray(8);

}

 

public class NonCollectionSequence32 

​       extends PetSequence implements Iterable {

​       public Iterator<Pet> iterator() {

​              return new Iterator<Pet>() {

​                     private int index = 0;

​                     public boolean hasNext() {

​                            return index < pets.length;

​                     }      

​                     public Pet next() { return pets[index++]; }

​                     public void remove() {

​                            throw new UnsupportedOperationException();

​                     }

​              };

​       }

​       public Iterable<Pet> reversed() {

​              return new Iterable<Pet>() {

​                     public Iterator<Pet> iterator() {

​                            return new Iterator<Pet>() {

​                                   int current = pets.length - 1;

​                                   public boolean hasNext() {

​                                          return current > -1;

​                                   }

​                                   public Pet next() {

​                                          return pets[current--];

​                                   }

​                                   public void remove() {

​                                          throw new

​                                          UnsupportedOperationException();

​                                   }

​                            };

​                     }

​              };

​       }

​       public Iterable<Pet> randomized() {

​              return new Iterable<Pet>() {

​                     public Iterator<Pet> iterator() {

​                            List<Pet> shuffled = new

​                                  ArrayList<Pet>(Arrays.asList(pets));

​                            Collections.shuffle(shuffled, new Random());

​                            return shuffled.iterator();

​                     }

​              };

​       }

​       public static void main(String[] args) {

​              NonCollectionSequence32 nc = new NonCollectionSequence32();

​              print("pets: ");

​              for(Pet p : nc.pets)

​                     print(p + " ");

​              println();

​              print("reversed: ");

​              for(Pet p : nc.reversed())

​                     print(p + " ");

​              println();

​              print("randomized: ");

​              for(Pet p : nc.randomized())

​                     print(p + " ");

​       }

}